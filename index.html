<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Forecast</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Our Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 
        HTML FILE PURPOSE:
        - Structure and content only
        - No styling (that's in styles.css)
        - No logic (that's in script.js)
        - Think of this as the skeleton/bones
    -->
    
    <!-- Navigation Bar -->
    <nav>
        <div class="nav-container">
            <div class="nav-brand">
                ğŸ’° Coin Forecast
            </div>
            <div class="profile-selector">
                <span style="color: #10b981; font-weight: 600; font-size: 0.9em;">ğŸ“Š</span>
                <select id="profileSelect" onchange="switchProfile(this.value)">
                    <option value="Personal">Personal</option>
                </select>
                <button onclick="manageProfiles()" title="Manage Profiles">âš™ï¸</button>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="dashboard">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="forecast">Forecast</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="config">Configuration</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="action">Action Plan</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active">
            <div class="header">
                <h1>ğŸ’° Financial Dashboard</h1>
                <p>Your Financial Overview at a Glance</p>
            </div>

            <!-- Stats Row -->
            <div class="stats-row" id="statsRow"></div>

            <!-- Quick Summary Panel -->
            <div class="panel">
                <h2>ğŸ“Š Financial Summary</h2>
                <div id="quickStats"></div>
            </div>

            <!-- Recent Activity -->
            <div class="panel" style="margin-top: 20px;">
                <h2>ğŸ“ˆ Quick Actions</h2>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="navigateToPage('config')">âš™ï¸ Configure Income & Expenses</button>
                    <button class="btn btn-primary" onclick="navigateToPage('forecast')">ğŸ“Š View Forecast</button>
                    <button class="btn btn-secondary" onclick="generateActionPlan(); navigateToPage('action')">ğŸ¯ Generate Action Plan</button>
                </div>
            </div>
        </div>

        <!-- Forecast Page -->
        <div id="forecast" class="page">
            <div class="header">
                <h1>ğŸ“Š 6-Week Forecast</h1>
                <p>Projected Cash Flow Analysis</p>
                <div id="weekTracking" style="margin-top: 15px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border: 1px solid #10b981;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                        <div>
                            <span style="font-weight: bold; color: #10b981;">Current Week: </span>
                            <span id="currentWeekDisplay" style="font-size: 1.2em; font-weight: bold; color: #e2e8f0;">Week 1</span>
                            <span style="margin-left: 10px; color: #94a3b8; font-size: 0.9em;" id="weekDateRange"></span>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="advanceToNextWeek()">â–¶ï¸ Complete Week</button>
                            <button class="btn btn-secondary" onclick="resetForecastCycle()">ğŸ”„ Reset Cycle</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Panel -->
            <div class="panel">
                <h2>Cash Flow Projection</h2>
                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>
            </div>

            <!-- Forecast Grid -->
            <div class="panel" style="margin-top: 20px;">
                <h2>Weekly Breakdown</h2>
                <div class="forecast-grid" id="forecastGrid"></div>
            </div>
        </div>

        <!-- Configuration Page -->
        <div id="config" class="page">
            <div class="header">
                <h1>âš™ï¸ Configuration</h1>
                <p>Manage Your Income and Expenses</p>
                <div style="margin-top: 10px;">
                    <span style="background: rgba(16, 185, 129, 0.2); color: #10b981; padding: 6px 12px; border-radius: 6px; font-size: 0.9em; font-weight: 600;" id="configWeekDisplay">
                        Currently in Week 1 of your forecast
                    </span>
                </div>
            </div>

            <div class="dashboard">
                <!-- Current Balance Panel -->
                <div class="panel">
                    <h2>ğŸ’µ Current Balance</h2>
                    <div class="input-group">
                        <label for="currentBalance">Starting Balance ($)</label>
                        <input type="text" id="currentBalance" placeholder="e.g., $1000 or 1000" value="0">
                    </div>
                    <div class="input-group" style="margin-top: 20px;">
                        <label for="savingsPercent">Savings Goal (%)</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="range" id="savingsPercent" min="0" max="100" step="1" value="0" style="flex: 1;">
                            <span id="savingsPercentDisplay" style="min-width: 45px; font-weight: bold; color: #10b981;">0%</span>
                        </div>
                        <div style="font-size: 0.85em; color: #94a3b8; margin-top: 5px;">
                            Percentage of net monthly income to save
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="panel">
                    <h2>ğŸ“Š Quick Stats</h2>
                    <div id="quickStatsConfig"></div>
                </div>

                <!-- Income Configuration -->
                <div class="panel">
                    <h2>ğŸ’° Income Configuration</h2>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button class="btn btn-primary" onclick="addIncome()">+ Add Income Source</button>
                        <button class="btn btn-secondary" onclick="saveIncomeData()" id="saveIncomeBtn">ğŸ’¾ Save Income</button>
                    </div>
                    <table id="incomeTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Amount ($)</th>
                                <th>Frequency</th>
                                <th>Next Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <!-- Expense Configuration -->
                <div class="panel">
                    <h2>ğŸ’¸ Expense Configuration</h2>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; align-items: center;">
                        <button class="btn btn-primary" onclick="addExpense()">+ Add Expense</button>
                        <button class="btn btn-secondary" onclick="saveExpenseData()" id="saveExpenseBtn">ğŸ’¾ Save Expenses</button>
                        <div style="display: flex; align-items: center; gap: 8px; margin-left: auto;">
                            <label for="expenseSort" style="color: #cbd5e1; font-weight: 500; white-space: nowrap;">Sort by:</label>
                            <select id="expenseSort" onchange="sortExpenses(this.value)" style="padding: 8px 12px; background: #0f172a; border: 1px solid #334155; border-radius: 6px; color: #e2e8f0; cursor: pointer;">
                                <option value="custom">Custom Order</option>
                                <option value="date-asc">Due Date (Earliest)</option>
                                <option value="date-desc">Due Date (Latest)</option>
                                <option value="amount-desc">Amount (High to Low)</option>
                                <option value="amount-asc">Amount (Low to High)</option>
                                <option value="name-asc">Name (A-Z)</option>
                                <option value="name-desc">Name (Z-A)</option>
                                <option value="essential">Essential First</option>
                            </select>
                        </div>
                    </div>
                    <table id="expenseTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Amount ($)</th>
                                <th>Frequency</th>
                                <th>Next Date</th>
                                <th>Essential</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary" onclick="saveAllData()" id="saveAllBtn">ğŸ’¾ Save All Changes</button>
                <button class="btn btn-secondary" onclick="exportData()">ğŸ“¥ Export Data</button>
                <button class="btn btn-secondary" onclick="importData()">ğŸ“¤ Import Data</button>
                <button class="btn btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ Clear All Data</button>
            </div>
        </div>

        <!-- Action Plan Page -->
        <div id="action" class="page">
            <div class="header">
                <h1>ğŸ¯ Action Plan</h1>
                <p>Personalized Financial Recommendations</p>
            </div>

            <div class="panel">
                <button class="btn btn-primary" onclick="generateActionPlan()" style="margin-bottom: 20px;">
                    ğŸ”„ Regenerate Action Plan
                </button>
                <div id="actionPlanContent">
                    <p style="color: #94a3b8; text-align: center; padding: 40px;">
                        Click "Generate Action Plan" to get personalized financial recommendations.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 
        JavaScript files are loaded at the bottom so the HTML is ready
        before the scripts run. This is a best practice.
    -->
    <script src="js/script.js"></script>
</body>
</html>
